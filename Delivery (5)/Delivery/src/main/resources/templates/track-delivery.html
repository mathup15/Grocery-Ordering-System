<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Track Delivery</title>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"/>
</head>
<body class="bg-light">

<div class="container mt-5">
    <h2 class="mb-4 text-center">Track Delivery</h2>

    <!-- Error message -->
    <div th:if="${error}" class="alert alert-danger text-center" th:text="${error}"></div>

    <div th:if="${assignment != null}">
        <div class="card shadow">
            <div class="card-body">
                <h5 class="card-title">Delivery Assignment</h5>

                <p><strong>Assignment ID:</strong>
                    <span th:text="${assignment.id}"></span></p>

                <p><strong>Order ID:</strong>
                    <span th:text="${assignment.order != null ? assignment.order.id : 'N/A'}"></span></p>

                <p><strong>Driver:</strong>
                    <span th:text="${assignment.driver != null ? assignment.driver.name : 'Unassigned'}"></span></p>

                <p><strong>Status:</strong>
                    <span th:text="${assignment.status}"></span></p>

                <!-- Proof Image if available -->
                <div th:if="${assignment.photoProof != null}">
                    <p><strong>Proof of Delivery:</strong></p>
                    <img th:src="@{'/delivery/proof/' + ${assignment.id}}"
                         alt="Proof Image"
                         class="img-fluid rounded shadow-sm"
                         style="max-width: 400px;"/>
                </div>
                <div th:if="${assignment.photoProof == null}">
                    <p><strong>Proof of Delivery:</strong> N/A</p>
                </div>
            </div>
        </div>
    </div>

    <div class="text-center mt-4">
        <a href="/delivery/list" class="btn btn-secondary">Back to Delivery List</a>
    </div>
</div>

</body>
</html>
